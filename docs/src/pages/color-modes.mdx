import Layout from '../components/layout'

export default Layout

# Color Modes

Color modes can be used to create a user-configurable dark mode or any number of other color modes.

## Defining colors

In the `theme.colors` object, add a nested `modes` object that will contain keys for the non-default color palette mode.

```js
// example theme colors
{
  colors: {
    text: '#000',
    background: '#fff',
    primary: '#07c',
    modes: {
      dark: {
        text: '#fff',
        background: '#000',
        primary: '#0cf',
      }
    }
  }
}
```

## Color mode state

To use color modes, import the `ColorModeProvider` component and wrap it around your outer most `ThemeProvider` component.
Initialize the state with the `initialColorMode` prop.

```jsx
import React from 'react'
import {
  ColorModeProvider,
  ThemeProvider,
} from 'theme-ui'
import theme from './theme'

export default props =>
  <ColorModeProvider
    initialColorMode='light'>
    <ThemeProvider theme={theme}>
      {props.children}
    </ThemeProvider>
  </ColorModeProvider>
```

## Setting the color mode

Use the `useColorMode` hook in your application to change the color mode.
This value will be stored in `localStorage` and used whenever the page is loaded.

```jsx
import React from 'react'
import { useColorMode } from 'theme-ui'

export default props => {
  const [ colorMode, setColorMode ] = useColorMode()
  return (
    <header>
      <button
        onClick={e => {
          setColorMode(colorMode === 'light' ? 'dark' : 'light')
        }}>
        Toggle
        {' '}
        {colorMode === 'light' ? 'Dark' : 'Light'}
      </button>
    </header>
  )
}
```

## Applying colors

The previous steps will enable a color mode state and pass it through context.
To use the color values, add them to a components styles or use the Emotion `Global` component.

```jsx
// example using color mode values
import React from 'react'
import { css } from 'theme-ui'

export default props =>
  <div
    css={css({
      color: 'text',
      bg: 'background',
    })}>
    {props.children}
  </div>
```

```jsx
// example using Global
import React from 'react'
import { css } from 'theme-ui'
import { Global } from '@emotion/core'

export default props =>
  <>
    <Global
      styles={css({
        body: {
          margin: 0,
          color: 'text',
          bg: 'background',
        }
      })}
    />
    {props.children}
  </>
```

## Caveats

- This feature does not yet pick up values from the `(prefers-color-scheme: dark)` media query
